% ==============================================================================
% General
% ==============================================================================

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{mathtools}

% ==============================================================================
% Fonts
% ==============================================================================

%\usepackage{polyglossia}
%\setdefaultlanguage[variant=swiss,spelling=new]{german}
%\setotherlanguage[variant=american]{english}
%
%%% Libertinus
%\usepackage{fontspec}
%\usepackage{unicode-math}
%\setmainfont[Ligatures=TeX]{Libertinus Serif}
%\setmonofont[Scale=MatchLowercase]{Fira Mono} % Consolas, Hack
%\setmathfont[math-style=ISO,bold-style=ISO,vargreek-shape=TeX]{Libertinus Math}[]
%\setsansfont[Scale=MatchUppercase, Ligatures=TeX,
%BoldFont = {Fira Sans Medium}]{Fira Sans Book}
%%\setsansfont[Scale=MatchUppercase, Ligatures=TeX,
%%BoldFont = {Source Sans Pro Semibold}]{Source Sans Pro}
%%\usepackage[cal=cm, scaled=0.96]{mathalfa} % mathcal


%%% Sans Serif
%\usepackage{fontspec}
%\usepackage{unicode-math}
%\setmainfont[Numbers=OldStyle, Ligatures=TeX, BoldFont = {Fira Sans Medium}]{Fira Sans Book}
%\setmonofont[Numbers=OldStyle,Scale=MatchLowercase]{Fira Mono} % Consolas
%\setmathfont[Scale=MatchLowercase,math-style=ISO,bold-style=ISO,vargreek-shape=TeX]{Libertinus Math}[]
%\setsansfont[Numbers=OldStyle,Scale=MatchUppercase, Ligatures=TeX,
%BoldFont = {Fira Sans Medium}]{Fira Sans Book}


%%% Minion Pro
%\usepackage[no-math]{fontspec}
%\setmonofont[Scale=MatchLowercase]{Consolas} % Hack
%\setmainfont[Ligatures=TeX]{Minion Pro}
%\setsansfont[Scale=MatchUppercase]{TeX Gyre Heros}
%%\usepackage[cal=cm, scaled=0.96]{mathalfa} % mathcal


%%% Termes
%\usepackage{fontspec}
%\usepackage{unicode-math}
%%\setmainfont[Ligatures=TeX]{Libertinus Serif}
%\setmainfont[Ligatures=TeX]{TeX Gyre Termes}
%%\setmathfont{Libertinus Math}[]
%\setmathfont[math-style=ISO,bold-style=ISO,vargreek-shape=TeX]{TeX Gyre Termes Math}
%\setsansfont{TeX Gyre Heros}
%%\usepackage[cal=cm, scaled=0.96]{mathalfa} % mathcal



\usepackage[english]{babel}


% -------------------------------------
% XCharter
% -------------------------------------

\usepackage[sups, scaled=.96]{XCharter} % 'osf' = oldstyle figures
\linespread{1.05}
\usepackage[scaled=0.937, lining]{FiraSans}
\usepackage[scaled=0.88, lining]{FiraMono}
%\usepackage[scale=0.89]{tgheros}
%\usepackage[varqu,varl, scaled=1.04]{inconsolata} % sans serif typewr iter
%\usepackage[xcharter,bigdelims,vvarbb,scaled=1.055]{newtxmath}  % bb from STIX
\AtBeginDocument {
	\DeclareSymbolFont{bch}{T1}{\rmdefault}{m}{n}
	\DeclareMathDelimiter{(}{\mathopen}{bch}{'050}{largesymbols}{"00}
	\DeclareMathDelimiter{)}{\mathopen}{bch}{'051}{largesymbols}{"01}
}
\addtokomafont{disposition}{\normalfont\sffamily\firamedium}

\usepackage[charter,expert, cal=cmcal]{mathdesign}
%\usepackage[mathcal]{eucal}

\usepackage{textcomp}

%%% Palatino
%\usepackage[no-math]{fontspec}
%%\usepackage[T1]{fontenc}
%\usepackage[]{unicode-math}
%\setmainfont{TeX Gyre Pagella}
%\setmonofont[Scale=MatchUppercase]{Inconsolata}
%\setmathfont{TeX Gyre Pagella Math}
%%\setsansfont[Scale=MatchUppercase]{Latin Modern Sans} % has no small caps
%\setsansfont[Scale=MatchUppercase]{Cabin} % has no small caps
%%\setsansfont[Scale=MatchUppercase]{Libertinus Sans}
%%\usepackage[sc]{mathpazo} % optional: osf
%\linespread{1.05}  


% ==============================================================================
% Random Packages 
% ==============================================================================

\usepackage{geometry}
%\usepackage{marvosym} %Einbindung verschiedener Symbole
%\usepackage{array}
%\usepackage{enumerate} %Erweiterung der enumerate-Umgebung
%\usepackage{ifthen,calc}
%\usepackage{mathrsfs,amssymb} %Zusatzzeichen
\usepackage{wrapfig}
%\usepackage[intlimits]{empheq} %L채dt auch amsmath; Option intlimits Integralgrenzen 체ber/unter Integral gestellt
\usepackage[retainorgcmds]{IEEEtrantools} %Besonders geeignet f체r einen mehrzeilige Formelsatz
\usepackage{theorem} %Theoremlayout
\usepackage{multicol}
\usepackage[svgnames,table,hyperref, dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{verbatim} %F체r mehrzeilige Kommentare
\usepackage{enumitem} %For list environments
%\usepackage{parskip} %Einzug aus, Absatzabstand ein
%\usepackage{sfmath}
\usepackage{blindtext}
\usepackage{floatflt}
\usepackage{float}
%\usepackage{titlesec}
\usepackage{booktabs}
\usepackage[fulladjust]{marginnote}
\usepackage{longtable}
\usepackage{xtab,afterpage}
\usepackage{xcolor}
\usepackage{accents}
\usepackage{hyperref}
\usepackage{bookmark}
\usepackage{siunitx}
\usepackage{physics} % differentials: \dd{x}
%\usepackage[most]{tcolorbox}
\usepackage{titling}
\usepackage[a]{esvect} % vectors, options a--h
\usepackage{textcomp}
\usepackage{tikzscale}
\usepackage{listings}
\usepackage[german=swiss]{csquotes}
\usepackage{microtype}



% ==============================================================================
% Graphics
% ==============================================================================

\usepackage{tikz}
\usepackage{pgfplots}
%\usepgfplotslibrary{external}


% ==============================================================================
% Math Commands
% ==============================================================================

%% Theorems % enable "theorem" package to use!! 
%\newtheorem{theorem}{Theorem}
%\newtheorem{corollary}{Corollary}[theorem]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{remark}{Remark}
%\newtheorem{satz}{Satz}[section]
%\newtheorem{beispiel}{Bsp.}[section]
%\newtheorem{definition}{Def.}[section]

% Mathematische Opteratoren 
%\DeclareMathOperator{\rg}{rg}
%\DeclareMathOperator{\diag}{diag}
%\DeclareMathOperator{\spur}{tr}
%\DeclareMathOperator{\mspan}{span}
%\DeclareMathOperator{\mim}{im}
%\DeclareMathOperator{\grad}{grad}

%% Vectors
%\renews
%\renewcommand{\vec}[1]{\underline{#1}}
%\renewcommand{\vec}[1]{\vv{#1}}
%\renewcommand{\vec}[1]{\overrightarrow{#1}}

% Differential
\newcommand{\dif}{\, \text{d}}
\newcommand{\diff}{\text{d}}

% Double underline for results
\def\doubleunderline#1{\underline{\underline{#1}}}
\DeclareMathOperator*{\argmin}{arg\,min}

\newcommand{\bm}{\vectorbold*} % using physics package
\newcommand{\matlab}{\textsc{Matlab}\textsuperscript{\tiny{\textregistered}}}


% ==============================================================================
% Page Settings
% ==============================================================================

% twoside
\geometry{left=4.6cm, right=3.6cm, top=3cm, bottom=3cm}

%% oneside
%\geometry{left=3.5cm, right=3.5cm, top=3cm, bottom=3cm}


% ==============================================================================
% PDF Settings
% ==============================================================================

\hypersetup{
	hidelinks=true,
	%	linkcolor=black,
	%	filecolor=black,      
	%	urlcolor=black,
	%	citecolor=black,
	%	allcolors=black,
	%	allbordercolors=white,
	%pdfpagemode=FullScreen,
	%	pdftitle={\mytitle},
	%	pdfauthor={\myauthor},
	pdfkeywords={},
	pdfcreator={Some fancy PDF-Creator...},
	bookmarksnumbered=true
}


% ==============================================================================
% Code Settings
% ==============================================================================

\renewcommand{\lstlistingname}{Code} % Visual Studio Style
\lstset{
	caption=\lstname,
	%	backgroundcolor=\color{white!95!black},
	tabsize=2,
	rulecolor=,
	language=C++,
	basicstyle=\small,
	basicstyle=\small\ttfamily,
	upquote=true,
	%	aboveskip={0.3\baselineskip},
	columns=fixed,
	showstringspaces=false,
	extendedchars=true,
	breaklines=true,
	prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	%	frame=single,
	showtabs=false,
	showspaces=false,
	showstringspaces=false,
	identifierstyle=\ttfamily,
	keywordstyle=\color[rgb]{0,0,1},
	commentstyle=\color[rgb]{0.133,0.545,0.133},
	stringstyle=\color[rgb]{0.6,0,0}, % Matlab:  0.627,0.126,0.941
	numbers=left,
	numberstyle=\ttfamily\tiny,
	stepnumber=1,
	xleftmargin=0em,
	%	numbersep=5pt,
	%	belowskip=1em
}


% ==============================================================================
% Footnote Settings
% ==============================================================================

\usepackage[hang]{footmisc}
\renewcommand{\footnotemargin}{1em}
%\addtolength{\footnotesep}{5mm}
\skip\footins=2\bigskipamount     % Determine the space above the rule
\renewcommand*{\footnoterule}{%
	\kern-3pt%
	\hrule width 1in%
	\kern 2.6pt%
	\vspace{\smallskipamount}       % The additional space below the rule
}


% ==============================================================================
% Caption Settings
% ==============================================================================

\usepackage[textfont={small},labelfont={small, bf}]{caption}
\DeclareCaptionFont{black}{ \color{white} }
\DeclareCaptionFormat{listing}{
	\colorbox[cmyk]{0.43, 0.35, 0.35,0.01 }{
		\parbox{\textwidth}{\hspace{15pt}#1#2#3}
	}
}
\captionsetup{format=plain, singlelinecheck=true}
\captionsetup[lstlisting]{labelfont={small, bf}, textfont={small}}


% ==============================================================================
% Title Settings
% ==============================================================================

\usepackage{titling}
\setlength{\droptitle}{-5em}
\pretitle{\begin{center}\LARGE\sffamily\firamedium}
		\posttitle{\par\end{center}}
\preauthor{\begin{center}}
		\postauthor{\par\end{center}}
\predate{\begin{center}}
		\postdate{\par\end{center}}


% ==============================================================================
% Footer / Header Settings
% ==============================================================================

\usepackage{fancyhdr}

% twoside with subsection
\fancyhf{}
\fancyhead[RE]{\small\nouppercase\leftmark}
\fancyhead[LO]{\small\rightmark}
\fancyhead[LE,RO]{\thepage}
\renewcommand{\headrulewidth}{0pt}


% Does not really work...
%\setotherlanguage{greek}
%\setotherlanguage{hebrew}
%\newfontfamily\greekfont[]{Linux Libertine O}
%\newfontfamily\hebrewfont[]{Linux Libertine O}


% ==============================================================================
% Bible 
% ==============================================================================

%\usepackage{bibleref-german}
%\biblerefstyle{Lutherbibel}
%\biblerefformat{kurz}

\usepackage{bibleref}
\biblerefstyle{jerusalem}
% Example: \bibleverses{Ex}(20:2,5,7-11)(21:3)

\newcommand{\V}[1]{\raisebox{.5ex}{\footnotesize#1 \nobreak\hspace{0.01em}}}


% ==============================================================================
% Bibliography 
% ==============================================================================

\usepackage[%
	backend=bibtex,%
	natbib=true,%
	sortlocale=auto,%
	firstinits=true,
	url=false, %
	maxnames=5,
	maxcitenames = 2,
	doi=false,%
	isbn=false,%
	eprint=false,%
	style= numeric-comp,%	
]{biblatex}
\addbibresource{references.bib}
\newcommand{\af}[1]{Adapted from \citet{#1}.}